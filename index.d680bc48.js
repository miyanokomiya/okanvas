function e(e,n,t,o){Object.defineProperty(e,n,{get:t,set:o,enumerable:!0,configurable:!0})}var n,t,o,i,_,r={},l=[],u=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function c(e,n){for(var t in n)e[t]=n[t];return e}function s(e){var n=e.parentNode;n&&n.removeChild(e)}function a(e,t,o){var i,_,r,l={};for(r in t)"key"==r?i=t[r]:"ref"==r?_=t[r]:l[r]=t[r];if(arguments.length>2&&(l.children=arguments.length>3?n.call(arguments,2):o),"function"==typeof e&&null!=e.defaultProps)for(r in e.defaultProps)void 0===l[r]&&(l[r]=e.defaultProps[r]);return h(e,l,i,_,null)}function h(e,n,i,_,r){var l={type:e,props:n,key:i,ref:_,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:null==r?++o:r};return null==r&&null!=t.vnode&&t.vnode(l),l}function f(e){return e.children}function d(e,n){this.props=e,this.context=n}function p(e,n){if(null==n)return e.__?p(e.__,e.__.__k.indexOf(e)+1):null;for(var t;n<e.__k.length;n++)if(null!=(t=e.__k[n])&&null!=t.__e)return t.__e;return"function"==typeof e.type?p(e):null}function v(e){var n,t;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,n=0;n<e.__k.length;n++)if(null!=(t=e.__k[n])&&null!=t.__e){e.__e=e.__c.base=t.__e;break}return v(e)}}function g(e){(!e.__d&&(e.__d=!0)&&i.push(e)&&!y.__r++||_!==t.debounceRendering)&&((_=t.debounceRendering)||setTimeout)(y)}function y(){for(var e;y.__r=i.length;)e=i.sort((function(e,n){return e.__v.__b-n.__v.__b})),i=[],e.some((function(e){var n,t,o,i,_,r;e.__d&&(_=(i=(n=e).__v).__e,(r=n.__P)&&(t=[],(o=c({},i)).__v=i.__v+1,S(r,i,o,n.__n,void 0!==r.ownerSVGElement,null!=i.__h?[_]:null,t,null==_?p(i):_,i.__h),H(t,i),i.__e!=_&&v(i)))}))}function m(e,n,t,o,i,_,u,c,s,a){var d,v,g,y,m,b,k,E=o&&o.__k||l,D=E.length;for(t.__k=[],d=0;d<n.length;d++)if(null!=(y=t.__k[d]=null==(y=n[d])||"boolean"==typeof y?null:"string"==typeof y||"number"==typeof y||"bigint"==typeof y?h(null,y,null,null,y):Array.isArray(y)?h(f,{children:y},null,null,null):y.__b>0?h(y.type,y.props,y.key,y.ref?y.ref:null,y.__v):y)){if(y.__=t,y.__b=t.__b+1,null===(g=E[d])||g&&y.key==g.key&&y.type===g.type)E[d]=void 0;else for(v=0;v<D;v++){if((g=E[v])&&y.key==g.key&&y.type===g.type){E[v]=void 0;break}g=null}S(e,y,g=g||r,i,_,u,c,s,a),m=y.__e,(v=y.ref)&&g.ref!=v&&(k||(k=[]),g.ref&&k.push(g.ref,null,y),k.push(v,y.__c||m,y)),null!=m?(null==b&&(b=m),"function"==typeof y.type&&y.__k===g.__k?y.__d=s=w(y,s,e):s=x(e,y,g,E,m,s),"function"==typeof t.type&&(t.__d=s)):s&&g.__e==s&&s.parentNode!=e&&(s=p(g))}for(t.__e=b,d=D;d--;)null!=E[d]&&L(E[d],E[d]);if(k)for(d=0;d<k.length;d++)U(k[d],k[++d],k[++d])}function w(e,n,t){for(var o,i=e.__k,_=0;i&&_<i.length;_++)(o=i[_])&&(o.__=e,n="function"==typeof o.type?w(o,n,t):x(t,o,o,i,o.__e,n));return n}function x(e,n,t,o,i,_){var r,l,u;if(void 0!==n.__d)r=n.__d,n.__d=void 0;else if(null==t||i!=_||null==i.parentNode)e:if(null==_||_.parentNode!==e)e.appendChild(i),r=null;else{for(l=_,u=0;(l=l.nextSibling)&&u<o.length;u+=1)if(l==i)break e;e.insertBefore(i,_),r=_}return void 0!==r?r:i.nextSibling}function b(e,n,t){"-"===n[0]?e.setProperty(n,t):e[n]=null==t?"":"number"!=typeof t||u.test(n)?t:t+"px"}function k(e,n,t,o,i){var _;e:if("style"===n)if("string"==typeof t)e.style.cssText=t;else{if("string"==typeof o&&(e.style.cssText=o=""),o)for(n in o)t&&n in t||b(e.style,n,"");if(t)for(n in t)o&&t[n]===o[n]||b(e.style,n,t[n])}else if("o"===n[0]&&"n"===n[1])_=n!==(n=n.replace(/Capture$/,"")),n=n.toLowerCase()in e?n.toLowerCase().slice(2):n.slice(2),e.l||(e.l={}),e.l[n+_]=t,t?o||e.addEventListener(n,_?D:E,_):e.removeEventListener(n,_?D:E,_);else if("dangerouslySetInnerHTML"!==n){if(i)n=n.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("href"!==n&&"list"!==n&&"form"!==n&&"tabIndex"!==n&&"download"!==n&&n in e)try{e[n]=null==t?"":t;break e}catch(e){}"function"==typeof t||(null==t||!1===t&&-1==n.indexOf("-")?e.removeAttribute(n):e.setAttribute(n,t))}}function E(e){this.l[e.type+!1](t.event?t.event(e):e)}function D(e){this.l[e.type+!0](t.event?t.event(e):e)}function S(e,o,i,_,l,u,a,h,v){var g,y,w,x,b,E,D,S,H,U,L,I,O,T,C,P=o.type;if(void 0!==o.constructor)return null;null!=i.__h&&(v=i.__h,h=o.__e=i.__e,o.__h=null,u=[h]),(g=t.__b)&&g(o);try{e:if("function"==typeof P){if(S=o.props,H=(g=P.contextType)&&_[g.__c],U=g?H?H.props.value:g.__:_,i.__c?D=(y=o.__c=i.__c).__=y.__E:("prototype"in P&&P.prototype.render?o.__c=y=new P(S,U):(o.__c=y=new d(S,U),y.constructor=P,y.render=M),H&&H.sub(y),y.props=S,y.state||(y.state={}),y.context=U,y.__n=_,w=y.__d=!0,y.__h=[],y._sb=[]),null==y.__s&&(y.__s=y.state),null!=P.getDerivedStateFromProps&&(y.__s==y.state&&(y.__s=c({},y.__s)),c(y.__s,P.getDerivedStateFromProps(S,y.__s))),x=y.props,b=y.state,w)null==P.getDerivedStateFromProps&&null!=y.componentWillMount&&y.componentWillMount(),null!=y.componentDidMount&&y.__h.push(y.componentDidMount);else{if(null==P.getDerivedStateFromProps&&S!==x&&null!=y.componentWillReceiveProps&&y.componentWillReceiveProps(S,U),!y.__e&&null!=y.shouldComponentUpdate&&!1===y.shouldComponentUpdate(S,y.__s,U)||o.__v===i.__v){for(y.props=S,y.state=y.__s,o.__v!==i.__v&&(y.__d=!1),y.__v=o,o.__e=i.__e,o.__k=i.__k,o.__k.forEach((function(e){e&&(e.__=o)})),L=0;L<y._sb.length;L++)y.__h.push(y._sb[L]);y._sb=[],y.__h.length&&a.push(y);break e}null!=y.componentWillUpdate&&y.componentWillUpdate(S,y.__s,U),null!=y.componentDidUpdate&&y.__h.push((function(){y.componentDidUpdate(x,b,E)}))}if(y.context=U,y.props=S,y.__v=o,y.__P=e,I=t.__r,O=0,"prototype"in P&&P.prototype.render){for(y.state=y.__s,y.__d=!1,I&&I(o),g=y.render(y.props,y.state,y.context),T=0;T<y._sb.length;T++)y.__h.push(y._sb[T]);y._sb=[]}else do{y.__d=!1,I&&I(o),g=y.render(y.props,y.state,y.context),y.state=y.__s}while(y.__d&&++O<25);y.state=y.__s,null!=y.getChildContext&&(_=c(c({},_),y.getChildContext())),w||null==y.getSnapshotBeforeUpdate||(E=y.getSnapshotBeforeUpdate(x,b)),C=null!=g&&g.type===f&&null==g.key?g.props.children:g,m(e,Array.isArray(C)?C:[C],o,i,_,l,u,a,h,v),y.base=o.__e,o.__h=null,y.__h.length&&a.push(y),D&&(y.__E=y.__=null),y.__e=!1}else null==u&&o.__v===i.__v?(o.__k=i.__k,o.__e=i.__e):o.__e=function(e,t,o,i,_,l,u,c){var a,h,f,d=o.props,v=t.props,g=t.type,y=0;if("svg"===g&&(_=!0),null!=l)for(;y<l.length;y++)if((a=l[y])&&"setAttribute"in a==!!g&&(g?a.localName===g:3===a.nodeType)){e=a,l[y]=null;break}if(null==e){if(null===g)return document.createTextNode(v);e=_?document.createElementNS("http://www.w3.org/2000/svg",g):document.createElement(g,v.is&&v),l=null,c=!1}if(null===g)d===v||c&&e.data===v||(e.data=v);else{if(l=l&&n.call(e.childNodes),h=(d=o.props||r).dangerouslySetInnerHTML,f=v.dangerouslySetInnerHTML,!c){if(null!=l)for(d={},y=0;y<e.attributes.length;y++)d[e.attributes[y].name]=e.attributes[y].value;(f||h)&&(f&&(h&&f.__html==h.__html||f.__html===e.innerHTML)||(e.innerHTML=f&&f.__html||""))}if(function(e,n,t,o,i){var _;for(_ in t)"children"===_||"key"===_||_ in n||k(e,_,null,t[_],o);for(_ in n)i&&"function"!=typeof n[_]||"children"===_||"key"===_||"value"===_||"checked"===_||t[_]===n[_]||k(e,_,n[_],t[_],o)}(e,v,d,_,c),f)t.__k=[];else if(y=t.props.children,m(e,Array.isArray(y)?y:[y],t,o,i,_&&"foreignObject"!==g,l,u,l?l[0]:o.__k&&p(o,0),c),null!=l)for(y=l.length;y--;)null!=l[y]&&s(l[y]);c||("value"in v&&void 0!==(y=v.value)&&(y!==e.value||"progress"===g&&!y||"option"===g&&y!==d.value)&&k(e,"value",y,d.value,!1),"checked"in v&&void 0!==(y=v.checked)&&y!==e.checked&&k(e,"checked",y,d.checked,!1))}return e}(i.__e,o,i,_,l,u,a,v);(g=t.diffed)&&g(o)}catch(e){o.__v=null,(v||null!=u)&&(o.__e=h,o.__h=!!v,u[u.indexOf(h)]=null),t.__e(e,o,i)}}function H(e,n){t.__c&&t.__c(n,e),e.some((function(n){try{e=n.__h,n.__h=[],e.some((function(e){e.call(n)}))}catch(e){t.__e(e,n.__v)}}))}function U(e,n,o){try{"function"==typeof e?e(n):e.current=n}catch(e){t.__e(e,o)}}function L(e,n,o){var i,_;if(t.unmount&&t.unmount(e),(i=e.ref)&&(i.current&&i.current!==e.__e||U(i,null,n)),null!=(i=e.__c)){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(e){t.__e(e,n)}i.base=i.__P=null,e.__c=void 0}if(i=e.__k)for(_=0;_<i.length;_++)i[_]&&L(i[_],n,o||"function"!=typeof e.type);o||null==e.__e||s(e.__e),e.__=e.__e=e.__d=void 0}function M(e,n,t){return this.constructor(e,t)}n=l.slice,t={__e:function(e,n,t,o){for(var i,_,r;n=n.__;)if((i=n.__c)&&!i.__)try{if((_=i.constructor)&&null!=_.getDerivedStateFromError&&(i.setState(_.getDerivedStateFromError(e)),r=i.__d),null!=i.componentDidCatch&&(i.componentDidCatch(e,o||{}),r=i.__d),r)return i.__E=i}catch(n){e=n}throw e}},o=0,d.prototype.setState=function(e,n){var t;t=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=c({},this.state),"function"==typeof e&&(e=e(c({},t),this.props)),e&&c(t,e),null!=e&&this.__v&&(n&&this._sb.push(n),g(this))},d.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),g(this))},d.prototype.render=f,i=[],y.__r=0;var I={};e(I,"useFileToBase64",(()=>fe),(e=>fe=e)),e(I,"ReadImageFileDemo",(()=>de),(e=>de=e)),e(I,"ClipImageDemo",(()=>pe),(e=>pe=e));var O,T,C,P,R=0,j=[],N=[],F=t.__b,A=t.__r,W=t.diffed,$=t.__c,z=t.unmount;function B(e,n){t.__h&&t.__h(T,e,R||n),R=0;var o=T.__H||(T.__H={__:[],__h:[]});return e>=o.__.length&&o.__.push({__V:N}),o.__[e]}function V(e){return R=1,function(e,n,t){var o=B(O++,2);if(o.t=e,!o.__c&&(o.__=[t?t(n):ne(void 0,n),function(e){var n=o.__N?o.__N[0]:o.__[0],t=o.t(n,e);n!==t&&(o.__N=[t,o.__[1]],o.__c.setState({}))}],o.__c=T,!T.u)){T.u=!0;var i=T.shouldComponentUpdate;T.shouldComponentUpdate=function(e,n,t){if(!o.__c.__H)return!0;var _=o.__c.__H.__.filter((function(e){return e.__c}));if(_.every((function(e){return!e.__N})))return!i||i.call(this,e,n,t);var r=!1;return _.forEach((function(e){if(e.__N){var n=e.__[0];e.__=e.__N,e.__N=void 0,n!==e.__[0]&&(r=!0)}})),!(!r&&o.__c.props===e)&&(!i||i.call(this,e,n,t))}}return o.__N||o.__}(ne,e)}function q(e,n){var o=B(O++,3);!t.__s&&ee(o.__H,n)&&(o.__=e,o.i=n,T.__H.__h.push(o))}function X(e,n){var t=B(O++,7);return ee(t.__H,n)?(t.__V=e(),t.i=n,t.__h=e,t.__V):t.__}function Y(e,n){return R=8,X((function(){return e}),n)}function G(){for(var e;e=j.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(Q),e.__H.__h.forEach(Z),e.__H.__h=[]}catch(n){e.__H.__h=[],t.__e(n,e.__v)}}t.__b=function(e){T=null,F&&F(e)},t.__r=function(e){A&&A(e),O=0;var n=(T=e.__c).__H;n&&(C===T?(n.__h=[],T.__h=[],n.__.forEach((function(e){e.__N&&(e.__=e.__N),e.__V=N,e.__N=e.i=void 0}))):(n.__h.forEach(Q),n.__h.forEach(Z),n.__h=[])),C=T},t.diffed=function(e){W&&W(e);var n=e.__c;n&&n.__H&&(n.__H.__h.length&&(1!==j.push(n)&&P===t.requestAnimationFrame||((P=t.requestAnimationFrame)||K)(G)),n.__H.__.forEach((function(e){e.i&&(e.__H=e.i),e.__V!==N&&(e.__=e.__V),e.i=void 0,e.__V=N}))),C=T=null},t.__c=function(e,n){n.some((function(e){try{e.__h.forEach(Q),e.__h=e.__h.filter((function(e){return!e.__||Z(e)}))}catch(o){n.some((function(e){e.__h&&(e.__h=[])})),n=[],t.__e(o,e.__v)}})),$&&$(e,n)},t.unmount=function(e){z&&z(e);var n,o=e.__c;o&&o.__H&&(o.__H.__.forEach((function(e){try{Q(e)}catch(e){n=e}})),o.__H=void 0,n&&t.__e(n,o.__v))};var J="function"==typeof requestAnimationFrame;function K(e){var n,t=function(){clearTimeout(o),J&&cancelAnimationFrame(n),setTimeout(e)},o=setTimeout(t,100);J&&(n=requestAnimationFrame(t))}function Q(e){var n=T,t=e.__c;"function"==typeof t&&(e.__c=void 0,t()),T=n}function Z(e){var n=T;e.__c=e.__(),T=n}function ee(e,n){return!e||e.length!==n.length||n.some((function(n,t){return n!==e[t]}))}function ne(e,n){return"function"==typeof n?n(e):n}var te={};e(te,"fileToBase64",(()=>ie),(e=>ie=e)),e(te,"base64ToImage",(()=>_e),(e=>_e=e)),e(te,"clipImage",(()=>ue),(e=>ue=e)),e(te,"drawRectOnImage",(()=>ce),(e=>ce=e));var oe=function(e,n,t,o){return new(t||(t=Promise))((function(i,_){function r(e){try{u(o.next(e))}catch(e){_(e)}}function l(e){try{u(o.throw(e))}catch(e){_(e)}}function u(e){var n;e.done?i(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(r,l)}u((o=o.apply(e,n||[])).next())}))};function ie(e){return new Promise(((n,t)=>{const o=new FileReader;o.onload=()=>n(o.result),o.onerror=t,o.readAsDataURL(e)}))}function _e(e){return new Promise(((n,t)=>{const o=new Image;o.onload=()=>n(o),o.onerror=t,o.src=e}))}function re(e){return oe(this,void 0,void 0,(function*(){if(e instanceof Image)return e;return yield _e(e)}))}function le(e,n,t){return oe(this,void 0,void 0,(function*(){const o=null!=t?t:{width:n.width,height:n.height},i=yield re(e),_=document.createElement("canvas");_.width=o.width,_.height=o.height;const r=_.getContext("2d");if(!r)throw new Error("Failed to get 2d-context from a canvas.");return r.drawImage(i,n.x,n.y,n.width,n.height,0,0,_.width,_.height),_}))}function ue(e,n,t){return oe(this,void 0,void 0,(function*(){return(yield le(e,n,t)).toDataURL()}))}function ce(e,n,t){return oe(this,void 0,void 0,(function*(){const o=yield re(e),i=document.createElement("canvas");i.width=o.width,i.height=o.height;const _=i.getContext("2d");if(!_)throw new Error("Failed to get 2d-context from a canvas.");return _.drawImage(o,0,0,o.width,o.height),t?t(_):(_.strokeStyle="red",_.lineWidth=3),_.strokeRect(n.x,n.y,n.width,n.height),i.toDataURL()}))}var se=function(e,n,t,o){return new(t||(t=Promise))((function(i,_){function r(e){try{u(o.next(e))}catch(e){_(e)}}function l(e){try{u(o.throw(e))}catch(e){_(e)}}function u(e){var n;e.done?i(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(r,l)}u((o=o.apply(e,n||[])).next())}))};const ae={flexCenter:{display:"flex",alignItems:"center",justifyContent:"center"}};function he(e){return a("div",{style:Object.assign(Object.assign({},ae.flexCenter),{border:"1px solid #000",width:"200px",height:"200px"})},[a("img",{src:e.src,style:{maxWidth:"100%",maxHeight:"100%"}})])}function fe(){const[e,n]=V("");return{base64:e,onInput:Y((e=>se(this,void 0,void 0,(function*(){var t;if(!(null===(t=null==e?void 0:e.target)||void 0===t?void 0:t.files))return;const o=yield te.fileToBase64(e.target.files[0]);n(o)}))),[])}}function de(){const{base64:e,onInput:n}=fe();return a("div",null,[a("h2",null,"fileToBase64"),a("input",{type:"file",onInput:n,accept:"image/*"},"fileToBase64"),he({src:e})])}function pe(){const[e,n]=V(""),[t,o]=V(""),[i,_]=V(""),r=Y((e=>se(this,void 0,void 0,(function*(){var t;if(!(null===(t=null==e?void 0:e.target)||void 0===t?void 0:t.files))return;const i=yield te.fileToBase64(e.target.files[0]),r=yield te.base64ToImage(i),l={x:.3*r.width,y:.2*r.height,width:.4*r.width,height:.6*r.height},u=yield te.drawRectOnImage(r,l),c=yield te.clipImage(r,l),s=yield te.clipImage(r,l,{width:2*l.width,height:l.height});n(u),o(c),_(s)}))),[]);return a("div",null,[a("h2",null,"clipImage"),a("input",{type:"file",accept:"image/*",onInput:r},"clipImage"),a("p",null,"src & rectangle"),he({src:e}),a("p",null,"clipped"),he({src:t}),a("p",null,"clipped & resized: width * 2"),he({src:i})])}var ve,ge,ye={};function me(e,n){if(!n)return{minRate:1,maxRate:1,rateW:1,rateH:1};const t=n.width/e.width,o=n.height/e.height;return{minRate:Math.min(t,o),maxRate:Math.max(t,o),rateW:t,rateH:o}}function we(e,n){if(!n)return Object.assign(Object.assign({},e),{x:0,y:0});const{rateW:t,rateH:o}=me(e,n),i=function(e,n,t){return e?n>t?{width:e.width,height:e.height/t*n}:{width:e.width/n*t,height:e.height}:{width:1,height:1}}(n,t,o),_=function(e,n){return n?{x:(e.width-n.width)/2,y:(e.height-n.height)/2}:{x:0,y:0}}(i,n);return Object.assign({x:-_.x,y:-_.y},i)}function xe(e){return"touches"in e}function be(e){return xe(e)?{x:e.touches[0].pageX,y:e.touches[0].pageY}:{x:e.pageX,y:e.pageY}}function ke(e,n=(()=>{})){let t=!1,o=null,i=null,_=null,r=0;return{onDown:e=>{t=!0,o=be(e),_=Object.assign({},o),i=Object.assign({},o),r=Date.now()},onMove:n=>{t&&(n.preventDefault(),_=be(n),t&&o&&_&&i&&(e({base:o,p:Object.assign({},_),d:{x:_.x-i.x,y:_.y-i.y}}),i=Object.assign({},_)))},onUp:()=>{_&&Date.now()-r<100&&n(Object.assign({},_)),t=!1,o=null,_=null,i=null,r=0}}}function Ee(e){const n="ontouchstart"in window;return e.onDown&&(window.addEventListener("mousedown",e.onDown,!1),n&&window.addEventListener("touchstart",e.onDown,!1)),e.onMove&&(window.addEventListener("mousemove",e.onMove,!1),n&&window.addEventListener("touchmove",e.onMove,{capture:!1,passive:!1})),e.onUp&&(window.addEventListener("mouseup",e.onUp,!1),window.addEventListener("mouseleave",e.onUp,!1),n&&(window.addEventListener("touchend",e.onUp,!1),window.addEventListener("touchcancel",e.onUp,!1))),()=>{e.onDown&&(window.removeEventListener("mousedown",e.onDown,!1),n&&window.removeEventListener("touchstart",e.onDown,!1)),e.onMove&&(window.removeEventListener("mousemove",e.onMove,!1),n&&window.removeEventListener("touchmove",e.onMove,{capture:!1})),e.onUp&&(window.removeEventListener("mouseup",e.onUp,!1),window.removeEventListener("mouseleave",e.onUp,!1),n&&(window.removeEventListener("touchend",e.onUp,!1),window.removeEventListener("touchcancel",e.onUp,!1)))}}function De({base64:e,clipSize:n,viewSize:t}){if(!n||!t)return null;const[o,i]=V(null),[_,r]=V(Object.assign({x:0,y:0},n)),[l,u]=V(null),[c,s]=V(null),[h,f]=V(null),[d,p]=V("");q((()=>{const e=ke((e=>{s(e)}));return f(e),Ee({onMove:e.onMove,onUp:()=>{e.onUp(),p(""),s(null),u(null)}})}),[]);const v=Y((e=>{h&&(p("move"),u(_),h.onDown(e))}),[_,h]),g=Y((e=>{h&&(p("resize"),u(_),h.onDown(e))}),[_,h]);q((()=>{e&&te.base64ToImage(e).then((e=>{i(e)}))}),[e]),q((()=>{r(we(n,o))}),[n,o]);const y=X((()=>we(n,o)),[n,o]),m=X((()=>`${y.x} ${y.y} ${y.width} ${y.height}`),[y]),w=X((()=>{const{maxRate:e}=me(t,y);return e}),[t,y]),x=X((()=>o?a("image",{href:e,x:0,y:0,width:o.width,height:o.height}):null),[e,o]);q((()=>{if(d&&c&&l)if("move"===d)r(Object.assign(Object.assign({},l),{x:l.x+(c.p.x-c.base.x)*w,y:l.y+(c.p.y-c.base.y)*w}));else if("resize"===d){const e=function(e,n,t){const o=t,i=e.x-n.x,_=e.y-n.y,r=o.x*o.x+o.y*o.y,l=(o.x*i+o.y*_)/r;return{x:o.x*l,y:o.y*l}}({x:l.width+(c.p.x-c.base.x)*w,y:l.height+(c.p.y-c.base.y)*w},{x:0,y:0},{x:n.width,y:n.height});r(Object.assign(Object.assign({},l),{width:e.x,height:e.y}))}}),[l,d,c,w,n]);const b=X((()=>o?function(e,n,t){return a("g",{transform:`translate(${e.x}, ${e.y})`},[a("rect",{x:0,y:0,width:e.width,height:e.height,fill:"none",stroke:"red","stroke-width":4*n}),a("g",{onMouseDown:null==t?void 0:t.onStartMove,onTouchStart:null==t?void 0:t.onStartMove},[a("circle",{cx:0,cy:0,r:8*n,fill:"red",stroke:"none"})]),a("g",{transform:`translate(${e.width}, ${e.height})`,onMouseDown:null==t?void 0:t.onStartResize,onTouchStart:null==t?void 0:t.onStartResize},[a("circle",{cx:0,cy:0,r:8*n,fill:"red",stroke:"none"})])])}(_,w,{onStartMove:v,onStartResize:g}):null),[o,_,w,v,g]);return a("div",{style:{width:`${t.width}px`,height:`${t.height}px`,padding:"8px",border:"1px solid #000",backgroundColor:"#ccc",overflow:"hidden"}},[a("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:m,style:{width:"100%",height:"100%",overflow:"visible"}},[x,b])])}e(ye,"getCentralizedViewBox",(()=>we)),e(ye,"getRate",(()=>me)),e(ye,"useDrag",(()=>ke)),e(ye,"useWindowPointerEffect",(()=>Ee)),ve=ye,ge=te,Object.keys(ge).forEach((function(e){"default"===e||"__esModule"===e||ve.hasOwnProperty(e)||Object.defineProperty(ve,e,{enumerable:!0,get:function(){return ge[e]}})})),De.defaultProps={clipSize:{width:200,height:200},viewSize:{width:200,height:200}};
//# sourceMappingURL=index.d680bc48.js.map
